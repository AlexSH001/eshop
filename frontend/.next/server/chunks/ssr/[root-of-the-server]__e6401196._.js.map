{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/contexts/CartContext.tsx"],"sourcesContent":["\"use client\";\n\nimport type React from 'react';\nimport { createContext, useContext, useReducer, useEffect, type ReactNode } from 'react'\nimport { toast } from \"sonner\";\n\nexport interface CartItem {\n  id: number;\n  name: string;\n  price: number;\n  originalPrice?: number;\n  image: string;\n  category: string;\n  quantity: number;\n}\n\ninterface CartState {\n  items: CartItem[];\n  total: number;\n  itemCount: number;\n}\n\ntype CartAction =\n  | { type: 'ADD_ITEM'; payload: Omit<CartItem, 'quantity'> }\n  | { type: 'REMOVE_ITEM'; payload: number }\n  | { type: 'UPDATE_QUANTITY'; payload: { id: number; quantity: number } }\n  | { type: 'CLEAR_CART' }\n  | { type: 'SET_CART'; payload: CartItem[] };\n\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\n  switch (action.type) {\n    case 'ADD_ITEM': {\n      const existingItem = state.items.find(item => item.id === action.payload.id);\n\n      if (existingItem) {\n        const updatedItems = state.items.map(item =>\n          item.id === action.payload.id\n            ? { ...item, quantity: item.quantity + 1 }\n            : item\n        );\n        const total = updatedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n        const itemCount = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n\n        return { items: updatedItems, total, itemCount };\n      }\n      const newItem = { ...action.payload, quantity: 1 };\n      const updatedItems = [...state.items, newItem];\n      const total = updatedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      const itemCount = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n\n      return { items: updatedItems, total, itemCount };\n    }\n\n    case 'REMOVE_ITEM': {\n      const updatedItems = state.items.filter(item => item.id !== action.payload);\n      const total = updatedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      const itemCount = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n\n      return { items: updatedItems, total, itemCount };\n    }\n\n    case 'UPDATE_QUANTITY': {\n      if (action.payload.quantity <= 0) {\n        const updatedItems = state.items.filter(item => item.id !== action.payload.id);\n        const total = updatedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n        const itemCount = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n\n        return { items: updatedItems, total, itemCount };\n      }\n\n      const updatedItems = state.items.map(item =>\n        item.id === action.payload.id\n          ? { ...item, quantity: action.payload.quantity }\n          : item\n      );\n      const total = updatedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      const itemCount = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n\n      return { items: updatedItems, total, itemCount };\n    }\n\n    case 'CLEAR_CART':\n      return { items: [], total: 0, itemCount: 0 };\n\n    case 'SET_CART':\n      const total = action.payload.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      const itemCount = action.payload.reduce((sum, item) => sum + item.quantity, 0);\n      return { items: action.payload, total, itemCount };\n\n    default:\n      return state;\n  }\n};\n\ninterface CartContextType {\n  state: CartState;\n  addItem: (item: Omit<CartItem, 'quantity'>) => void;\n  removeItem: (id: number) => void;\n  updateQuantity: (id: number, quantity: number) => void;\n  clearCart: () => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [state, dispatch] = useReducer(cartReducer, {\n    items: [],\n    total: 0,\n    itemCount: 0,\n  });\n\n  // Load cart from API on mount\n  useEffect(() => {\n    const loadCart = async () => {\n      try {\n        const sessionId = localStorage.getItem('session_id');\n        const token = localStorage.getItem('auth_token');\n        \n        if (!sessionId && !token) {\n          // Create session ID for guest users\n          const newSessionId = Math.random().toString(36).substr(2, 9);\n          localStorage.setItem('session_id', newSessionId);\n        }\n\n        const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/cart`, {\n          headers: {\n            ...(token && { Authorization: `Bearer ${token}` }),\n            ...(sessionId && { 'X-Session-ID': sessionId }),\n          },\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          // Convert API cart items to local format\n          const items = data.items?.map((item: any) => ({\n            id: item.product_id,\n            name: item.product_name,\n            price: parseFloat(item.price),\n            image: item.product_image,\n            category: item.category_name || 'Unknown',\n            quantity: item.quantity,\n          })) || [];\n\n          dispatch({ type: 'SET_CART', payload: items });\n        }\n      } catch (error) {\n        console.error('Failed to load cart:', error);\n      }\n    };\n\n    loadCart();\n  }, []);\n\n  const addItem = async (item: Omit<CartItem, 'quantity'>) => {\n    try {\n      const sessionId = localStorage.getItem('session_id');\n      const token = localStorage.getItem('auth_token');\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/cart/items`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token && { Authorization: `Bearer ${token}` }),\n          ...(sessionId && { 'X-Session-ID': sessionId }),\n        },\n        body: JSON.stringify({\n          productId: item.id,\n          quantity: 1,\n        }),\n      });\n\n      if (response.ok) {\n        dispatch({ type: 'ADD_ITEM', payload: item });\n        toast.success(`${item.name} added to cart!`);\n      } else {\n        const error = await response.json();\n        toast.error(error.error || 'Failed to add item to cart');\n      }\n    } catch (error) {\n      console.error('Failed to add item to cart:', error);\n      toast.error('Failed to add item to cart');\n    }\n  };\n\n  const removeItem = async (id: number) => {\n    try {\n      const sessionId = localStorage.getItem('session_id');\n      const token = localStorage.getItem('auth_token');\n      const item = state.items.find(item => item.id === id);\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/cart/items/${id}`, {\n        method: 'DELETE',\n        headers: {\n          ...(token && { Authorization: `Bearer ${token}` }),\n          ...(sessionId && { 'X-Session-ID': sessionId }),\n        },\n      });\n\n      if (response.ok) {\n        dispatch({ type: 'REMOVE_ITEM', payload: id });\n        if (item) {\n          toast.success(`${item.name} removed from cart`);\n        }\n      } else {\n        const error = await response.json();\n        toast.error(error.error || 'Failed to remove item from cart');\n      }\n    } catch (error) {\n      console.error('Failed to remove item from cart:', error);\n      toast.error('Failed to remove item from cart');\n    }\n  };\n\n  const updateQuantity = async (id: number, quantity: number) => {\n    try {\n      const sessionId = localStorage.getItem('session_id');\n      const token = localStorage.getItem('auth_token');\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/cart/items/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token && { Authorization: `Bearer ${token}` }),\n          ...(sessionId && { 'X-Session-ID': sessionId }),\n        },\n        body: JSON.stringify({ quantity }),\n      });\n\n      if (response.ok) {\n        dispatch({ type: 'UPDATE_QUANTITY', payload: { id, quantity } });\n      } else {\n        const error = await response.json();\n        toast.error(error.error || 'Failed to update quantity');\n      }\n    } catch (error) {\n      console.error('Failed to update quantity:', error);\n      toast.error('Failed to update quantity');\n    }\n  };\n\n  const clearCart = async () => {\n    try {\n      const sessionId = localStorage.getItem('session_id');\n      const token = localStorage.getItem('auth_token');\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/cart`, {\n        method: 'DELETE',\n        headers: {\n          ...(token && { Authorization: `Bearer ${token}` }),\n          ...(sessionId && { 'X-Session-ID': sessionId }),\n        },\n      });\n\n      if (response.ok) {\n        dispatch({ type: 'CLEAR_CART' });\n        toast.success('Cart cleared');\n      } else {\n        const error = await response.json();\n        toast.error(error.error || 'Failed to clear cart');\n      }\n    } catch (error) {\n      console.error('Failed to clear cart:', error);\n      toast.error('Failed to clear cart');\n    }\n  };\n\n  return (\n    <CartContext.Provider value={{ state, addItem, removeItem, updateQuantity, clearCart }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  firstName?: string;\n  lastName?: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\ninterface AuthContextType extends AuthState {\n  login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  signup: (email: string, password: string, firstName: string, lastName: string) => Promise<{ success: boolean; error?: string }>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n  });\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      const token = localStorage.getItem('auth_token');\n      const storedUser = localStorage.getItem('user');\n      \n      if (token && storedUser) {\n        try {\n          const user = JSON.parse(storedUser);\n          setState({\n            user,\n            isAuthenticated: true,\n            isLoading: false,\n          });\n        } catch (error) {\n          console.error('Failed to parse stored user:', error);\n          localStorage.removeItem('user');\n          localStorage.removeItem('auth_token');\n          setState(prev => ({ ...prev, isLoading: false }));\n        }\n      } else {\n        setState(prev => ({ ...prev, isLoading: false }));\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const login = async (email: string, password: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        return { success: false, error: data.error || 'Login failed' };\n      }\n\n      // Store tokens\n      localStorage.setItem('auth_token', data.accessToken);\n      if (data.refreshToken) {\n        localStorage.setItem('refresh_token', data.refreshToken);\n      }\n\n      // Store user data\n      const user: User = {\n        id: data.user.id.toString(),\n        email: data.user.email,\n        name: `${data.user.first_name} ${data.user.last_name}`,\n        firstName: data.user.first_name,\n        lastName: data.user.last_name,\n      };\n\n      localStorage.setItem('user', JSON.stringify(user));\n      setState({\n        user,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n\n      return { success: true };\n    } catch (error) {\n      console.error('Login error:', error);\n      return { success: false, error: 'Login failed. Please try again.' };\n    }\n  };\n\n  const signup = async (email: string, password: string, firstName: string, lastName: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password, firstName, lastName }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        return { success: false, error: data.error || 'Signup failed' };\n      }\n\n      // Store tokens\n      localStorage.setItem('auth_token', data.accessToken);\n      if (data.refreshToken) {\n        localStorage.setItem('refresh_token', data.refreshToken);\n      }\n\n      // Store user data\n      const user: User = {\n        id: data.user.id.toString(),\n        email: data.user.email,\n        name: `${data.user.first_name} ${data.user.last_name}`,\n        firstName: data.user.first_name,\n        lastName: data.user.last_name,\n      };\n\n      localStorage.setItem('user', JSON.stringify(user));\n      setState({\n        user,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n\n      return { success: true };\n    } catch (error) {\n      console.error('Signup error:', error);\n      return { success: false, error: 'Signup failed. Please try again.' };\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('refresh_token');\n    localStorage.removeItem('wishlist');\n    setState({\n      user: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  };\n\n  const value: AuthContextType = {\n    ...state,\n    login,\n    signup,\n    logout,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/contexts/WishlistContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { toast } from 'sonner';\n\ninterface WishlistItem {\n  id: number;\n  name: string;\n  price: number;\n  originalPrice?: number;\n  image: string;\n  category: string;\n}\n\ninterface WishlistState {\n  items: WishlistItem[];\n  itemCount: number;\n}\n\ninterface WishlistContextType {\n  state: WishlistState;\n  addToWishlist: (item: WishlistItem) => void;\n  removeFromWishlist: (id: number) => void;\n  toggleWishlist: (item: WishlistItem) => void;\n  isInWishlist: (id: number) => boolean;\n  clearWishlist: () => void;\n}\n\nconst WishlistContext = createContext<WishlistContextType | undefined>(undefined);\n\nexport function WishlistProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<WishlistState>({\n    items: [],\n    itemCount: 0,\n  });\n\n  // Load wishlist from localStorage on mount\n  useEffect(() => {\n    const savedWishlist = localStorage.getItem('wishlist');\n    if (savedWishlist) {\n      try {\n        const items = JSON.parse(savedWishlist) as WishlistItem[];\n        setState({\n          items,\n          itemCount: items.length,\n        });\n      } catch (error) {\n        console.error('Failed to parse wishlist:', error);\n        localStorage.removeItem('wishlist');\n      }\n    }\n  }, []);\n\n  // Save to localStorage whenever wishlist changes\n  useEffect(() => {\n    localStorage.setItem('wishlist', JSON.stringify(state.items));\n  }, [state.items]);\n\n  const addToWishlist = (item: WishlistItem) => {\n    setState(prev => {\n      const existingItem = prev.items.find(i => i.id === item.id);\n      if (existingItem) {\n        toast.info('Item already in wishlist');\n        return prev;\n      }\n\n      const newItems = [...prev.items, item];\n      toast.success('Added to wishlist');\n      return {\n        items: newItems,\n        itemCount: newItems.length,\n      };\n    });\n  };\n\n  const removeFromWishlist = (id: number) => {\n    setState(prev => {\n      const newItems = prev.items.filter(item => item.id !== id);\n      toast.success('Removed from wishlist');\n      return {\n        items: newItems,\n        itemCount: newItems.length,\n      };\n    });\n  };\n\n  const toggleWishlist = (item: WishlistItem) => {\n    setState(prev => {\n      const existingItem = prev.items.find(i => i.id === item.id);\n\n      if (existingItem) {\n        // Remove from wishlist\n        const newItems = prev.items.filter(i => i.id !== item.id);\n        toast.success('Removed from wishlist');\n        return {\n          items: newItems,\n          itemCount: newItems.length,\n        };\n      }\n      // Add to wishlist\n      const newItems = [...prev.items, item];\n      toast.success('Added to wishlist');\n      return {\n        items: newItems,\n        itemCount: newItems.length,\n      };\n    });\n  };\n\n  const isInWishlist = (id: number): boolean => {\n    return state.items.some(item => item.id === id);\n  };\n\n  const clearWishlist = () => {\n    setState({\n      items: [],\n      itemCount: 0,\n    });\n    toast.success('Wishlist cleared');\n  };\n\n  const value: WishlistContextType = {\n    state,\n    addToWishlist,\n    removeFromWishlist,\n    toggleWishlist,\n    isInWishlist,\n    clearWishlist,\n  };\n\n  return (\n    <WishlistContext.Provider value={value}>\n      {children}\n    </WishlistContext.Provider>\n  );\n}\n\nexport function useWishlist() {\n  const context = useContext(WishlistContext);\n  if (context === undefined) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 644, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/contexts/SearchContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, type ReactNode } from 'react';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  originalPrice?: number;\n  image: string;\n  category: string;\n}\n\ninterface SearchState {\n  query: string;\n  results: Product[];\n  isSearching: boolean;\n  recentSearches: string[];\n}\n\ninterface SearchContextType {\n  state: SearchState;\n  search: (query: string) => void;\n  clearSearch: () => void;\n  addRecentSearch: (query: string) => void;\n  clearRecentSearches: () => void;\n}\n\nconst SearchContext = createContext<SearchContextType | undefined>(undefined);\n\nexport function SearchProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<SearchState>({\n    query: '',\n    results: [],\n    isSearching: false,\n    recentSearches: typeof window !== 'undefined' ? JSON.parse(localStorage.getItem('recentSearches') || '[]') : [],\n  });\n\n  const search = async (query: string) => {\n    setState(prev => ({ ...prev, query, isSearching: true }));\n    if (!query.trim()) {\n      setState(prev => ({ ...prev, results: [], isSearching: false }));\n      return;\n    }\n    try {\n      const res = await fetch(`http://localhost:3001/api/products?search=${encodeURIComponent(query)}&limit=6`);\n      if (!res.ok) throw new Error('Failed to fetch products');\n      const data = await res.json();\n      setState(prev => ({ ...prev, results: data.products, isSearching: false }));\n    } catch (err) {\n      setState(prev => ({ ...prev, results: [], isSearching: false }));\n    }\n  };\n\n  const clearSearch = () => {\n    setState(prev => ({\n      ...prev,\n      query: '',\n      results: [],\n      isSearching: false\n    }));\n  };\n\n  const addRecentSearch = (query: string) => {\n    if (!query.trim()) return;\n    setState(prev => {\n      const newRecentSearches = [\n        query,\n        ...prev.recentSearches.filter(s => s !== query)\n      ].slice(0, 5);\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('recentSearches', JSON.stringify(newRecentSearches));\n      }\n      return {\n        ...prev,\n        recentSearches: newRecentSearches\n      };\n    });\n  };\n\n  const clearRecentSearches = () => {\n    setState(prev => ({ ...prev, recentSearches: [] }));\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('recentSearches');\n    }\n  };\n\n  return (\n    <SearchContext.Provider value={{\n      state,\n      search,\n      clearSearch,\n      addRecentSearch,\n      clearRecentSearches\n    }}>\n      {children}\n    </SearchContext.Provider>\n  );\n}\n\nexport function useSearch() {\n  const context = useContext(SearchContext);\n  if (context === undefined) {\n    throw new Error('useSearch must be used within a SearchProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;AA4BA,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAiC;AAE5D,SAAS,eAAe,EAAE,QAAQ,EAA2B;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;QAC9C,OAAO;QACP,SAAS,EAAE;QACX,aAAa;QACb,gBAAgB,6EAA6F,EAAE;IACjH;IAEA,MAAM,SAAS,OAAO;QACpB,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE;gBAAO,aAAa;YAAK,CAAC;QACvD,IAAI,CAAC,MAAM,IAAI,IAAI;YACjB,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,SAAS,EAAE;oBAAE,aAAa;gBAAM,CAAC;YAC9D;QACF;QACA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,0CAA0C,EAAE,mBAAmB,OAAO,QAAQ,CAAC;YACxG,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,SAAS,KAAK,QAAQ;oBAAE,aAAa;gBAAM,CAAC;QAC3E,EAAE,OAAO,KAAK;YACZ,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,SAAS,EAAE;oBAAE,aAAa;gBAAM,CAAC;QAChE;IACF;IAEA,MAAM,cAAc;QAClB,SAAS,CAAA,OAAQ,CAAC;gBAChB,GAAG,IAAI;gBACP,OAAO;gBACP,SAAS,EAAE;gBACX,aAAa;YACf,CAAC;IACH;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,SAAS,CAAA;YACP,MAAM,oBAAoB;gBACxB;mBACG,KAAK,cAAc,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM;aAC1C,CAAC,KAAK,CAAC,GAAG;YACX,uCAAmC;;YAEnC;YACA,OAAO;gBACL,GAAG,IAAI;gBACP,gBAAgB;YAClB;QACF;IACF;IAEA,MAAM,sBAAsB;QAC1B,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,gBAAgB,EAAE;YAAC,CAAC;QACjD,uCAAmC;;QAEnC;IACF;IAEA,qBACE,gMAAC,cAAc,QAAQ;QAAC,OAAO;YAC7B;YACA;YACA;YACA;YACA;QACF;kBACG;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/contexts/AdminContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\n\ninterface AdminUser {\n  id: string;\n  email: string;\n  name: string;\n  role: 'admin' | 'super_admin';\n}\n\ninterface AdminState {\n  user: AdminUser | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\ninterface AdminContextType extends AdminState {\n  login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  logout: () => void;\n}\n\nconst AdminContext = createContext<AdminContextType | undefined>(undefined);\n\nexport function AdminProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<AdminState>({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n  });\n\n  // Check for existing admin session on mount\n  useEffect(() => {\n    const checkAdminAuth = () => {\n      const storedAdmin = localStorage.getItem('admin_user');\n      if (storedAdmin) {\n        try {\n          const user = JSON.parse(storedAdmin);\n          setState({\n            user,\n            isAuthenticated: true,\n            isLoading: false,\n          });\n        } catch (error) {\n          console.error('Failed to parse stored admin user:', error);\n          localStorage.removeItem('admin_user');\n          setState(prev => ({ ...prev, isLoading: false }));\n        }\n      } else {\n        setState(prev => ({ ...prev, isLoading: false }));\n      }\n    };\n\n    checkAdminAuth();\n  }, []);\n\n  const login = async (email: string, password: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const res = await fetch('http://localhost:3001/api/auth/admin/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      if (!res.ok) {\n        const data = await res.json();\n        return { success: false, error: data.error || 'Invalid admin credentials' };\n      }\n      const data = await res.json();\n      const user: AdminUser = {\n        id: data.admin.id,\n        email: data.admin.email,\n        name: data.admin.name,\n        role: data.admin.role,\n      };\n      localStorage.setItem('admin_user', JSON.stringify(user));\n      localStorage.setItem('admin_token', data.token);\n      setState({\n        user,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: 'Login failed. Please try again.' };\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('admin_user');\n    setState({\n      user: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  };\n\n  const value: AdminContextType = {\n    ...state,\n    login,\n    logout,\n  };\n\n  return (\n    <AdminContext.Provider value={value}>\n      {children}\n    </AdminContext.Provider>\n  );\n}\n\nexport function useAdmin() {\n  const context = useContext(AdminContext);\n  if (context === undefined) {\n    throw new Error('useAdmin must be used within an AdminProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;AAsBA,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAgC;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAA2B;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc;QAC7C,MAAM;QACN,iBAAiB;QACjB,WAAW;IACb;IAEA,4CAA4C;IAC5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,iBAAiB;YACrB,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,IAAI,aAAa;gBACf,IAAI;oBACF,MAAM,OAAO,KAAK,KAAK,CAAC;oBACxB,SAAS;wBACP;wBACA,iBAAiB;wBACjB,WAAW;oBACb;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,sCAAsC;oBACpD,aAAa,UAAU,CAAC;oBACxB,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,WAAW;wBAAM,CAAC;gBACjD;YACF,OAAO;gBACL,SAAS,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,WAAW;oBAAM,CAAC;YACjD;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,8CAA8C;gBACpE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;gBAAS;YACzC;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,OAAO;oBAAE,SAAS;oBAAO,OAAO,KAAK,KAAK,IAAI;gBAA4B;YAC5E;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,OAAkB;gBACtB,IAAI,KAAK,KAAK,CAAC,EAAE;gBACjB,OAAO,KAAK,KAAK,CAAC,KAAK;gBACvB,MAAM,KAAK,KAAK,CAAC,IAAI;gBACrB,MAAM,KAAK,KAAK,CAAC,IAAI;YACvB;YACA,aAAa,OAAO,CAAC,cAAc,KAAK,SAAS,CAAC;YAClD,aAAa,OAAO,CAAC,eAAe,KAAK,KAAK;YAC9C,SAAS;gBACP;gBACA,iBAAiB;gBACjB,WAAW;YACb;YACA,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAkC;QACpE;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,SAAS;YACP,MAAM;YACN,iBAAiB;YACjB,WAAW;QACb;IACF;IAEA,MAAM,QAA0B;QAC9B,GAAG,KAAK;QACR;QACA;IACF;IAEA,qBACE,gMAAC,aAAa,QAAQ;QAAC,OAAO;kBAC3B;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 878, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/components/ui/sonner.tsx"],"sourcesContent":["\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAOA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,CAAA,GAAA,gJAAA,CAAA,WAAQ,AAAD;IAEpC,qBACE,gMAAC,wIAAA,CAAA,UAAM;QACL,OAAO;QACP,WAAU;QACV,cAAc;YACZ,YAAY;gBACV,OACE;gBACF,aAAa;gBACb,cACE;gBACF,cACE;YACJ;QACF;QACC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 916, "column": 0}, "map": {"version":3,"sources":["file:///root/Documents/project/eshop/frontend/src/app/ClientBody.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { CartProvider } from \"@/contexts/CartContext\";\nimport { AuthProvider } from \"@/contexts/AuthContext\";\nimport { WishlistProvider } from \"@/contexts/WishlistContext\";\nimport { SearchProvider } from \"@/contexts/SearchContext\";\nimport { AdminProvider } from \"@/contexts/AdminContext\";\nimport { Toaster } from \"@/components/ui/sonner\";\n\nexport default function ClientBody({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  // Remove any extension-added classes during hydration\n  useEffect(() => {\n    // This runs only on the client after hydration\n    document.body.className = \"antialiased\";\n  }, []);\n\n  return (\n    <AuthProvider>\n      <AdminProvider>\n        <WishlistProvider>\n          <SearchProvider>\n            <CartProvider>\n              <div className=\"antialiased\">\n                {children}\n                <Toaster richColors position=\"top-right\" />\n              </div>\n            </CartProvider>\n          </SearchProvider>\n        </WishlistProvider>\n      </AdminProvider>\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,sDAAsD;IACtD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,+CAA+C;QAC/C,SAAS,IAAI,CAAC,SAAS,GAAG;IAC5B,GAAG,EAAE;IAEL,qBACE,gMAAC,+HAAA,CAAA,eAAY;kBACX,cAAA,gMAAC,gIAAA,CAAA,gBAAa;sBACZ,cAAA,gMAAC,mIAAA,CAAA,mBAAgB;0BACf,cAAA,gMAAC,iIAAA,CAAA,iBAAc;8BACb,cAAA,gMAAC,+HAAA,CAAA,eAAY;kCACX,cAAA,gMAAC;4BAAI,WAAU;;gCACZ;8CACD,gMAAC,kIAAA,CAAA,UAAO;oCAAC,UAAU;oCAAC,UAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7C","debugId":null}}]
}